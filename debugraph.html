
<html>

<head>
<title> Debugraph </title>
<link rel="stylesheet" type="text/css" href="css/debugraph.css">
<script type="text/javascript" src="libs/sigma.min.js"></script>
<script type="text/javascript" src="libs/sigma.layout.forceAtlas2.min.js"></script>
<script type="text/javascript" src="libs/jquery.min.js"></script>
</head>

<body>

<div class="panel-wrapper">
    <div id="graph-panel"></div>
</div>

<div class="panel-wrapper right">
    <textarea id="code-panel">a b c d e f
a-b a-c a-d c-e e-f</textarea>
    <button id="btn-draw">Draw</button>
</div>

<script>

function covertToGraphData(s) {
    
    var lines = s.split("\n");

    var nodeIdList = lines[0]
        .trim().split(" ").filter(function(e) { return e.length != 0; });
    var edgeString = lines[1]
        .trim().split(" ").filter(function(e) { return e.length != 0; });

    var graph = { nodes: [], edges: [] };

    for (var i in nodeIdList) {
        var id = nodeIdList[i];
        var node = {
            id: id, label: id, x: Math.random(), y: Math.random(), size: 10 
        };
        graph.nodes.push(node);
    }

    for (var i in edgeString) {
        var id = edgeString[i];
        var nodes = id.split("-");
        var edge = {
            id: id, source: nodes[0], target: nodes[1]
        };
        graph.edges.push(edge);
    }

    return graph
}

var gSigma;

function run() {

    var input = $("#code-panel").val();
    var graph = covertToGraphData(input);

    $("#graph-panel").html("");

    gSigma = new sigma({ graph: graph, container: 'graph-panel' });
    
    gSigma.startForceAtlas2({
        worker: true,
        iterationsPerRender: 100,
        barnesHutOptimize: false
    });

    // Timeout to stop force directed layout.
    setTimeout("gSigma.killForceAtlas2();", 500);
}

$(document).ready(function() {

    // Initial run.
    run();

    $("#btn-draw").bind("click", function() {
        run();
    });
});

</script>
</body>

</html>
